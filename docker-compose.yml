version: '3.2'

# networks:
#   integration-test-example:

services:
  go:
    build:
      context: .
      dockerfile: ./Dockerfile
    ports:
      - "2565:2565"

  go_test:
    restart: always
    build:
      context: .
      dockerfile: ./Dockerfile.test
    # volumes:
    #   - $PWD:/go/src/target
    # depends_on:
    #   - db
    # networks:
    #   - integration-test-example
  # db:
  #   image: postgres:12.12
  #   ports:
  #     - "5432:5432"
  #   expose:
  #     - "5432"
  #   environment:
  #     POSTGRES_USER: root
  #     POSTGRES_PASSWORD: root
  #     POSTGRES_DB: Assessment_GO_Bootcamp
  #   restart: on-failure
  #   volumes:
  #     - ./db:/docker-entrypoint-initdb.d/
  #   networks:
  #     - integration-test-example